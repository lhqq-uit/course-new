<!DOCTYPE html>
<html lang="en" dir="ltr">


<!-- Mirrored from tutorio-bootstrap.frontendmatter.com/student-dashboard.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 09 Jul 2019 02:22:46 GMT -->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Dashboard</title>

    <!-- Prevent the demo from appearing in search engines -->
    <meta name="robots" content="noindex">

    <!-- Perfect Scrollbar -->
    <link type="text/css" href="../assets/vendor/perfect-scrollbar.css" rel="stylesheet">

    <!-- Fix Footer CSS -->
    <link type="text/css" href="../assets/vendor/fix-footer.css" rel="stylesheet">

    <!-- Material Design Icons -->
    <link type="text/css" href="../assets/css/material-icons.css" rel="stylesheet">
    <link type="text/css" href="../assets/css/material-icons.rtl.css" rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link type="text/css" href="../assets/css/fontawesome.css" rel="stylesheet">
    <link type="text/css" href="../assets/css/fontawesome.rtl.css" rel="stylesheet">

    <!-- Preloader -->
    <link type="text/css" href="../assets/css/preloader.css" rel="stylesheet">
    <link type="text/css" href="../assets/css/preloader.rtl.css" rel="stylesheet">

    <!-- App CSS -->
    <link type="text/css" href="../assets/css/app.css" rel="stylesheet">
    <link type="text/css" href="../assets/css/app.rtl.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js"></script>
    <script src="https://momentjs.com/downloads/moment-with-locales.min.js"></script>




</head>

<body class="layout-navbar-mini-fixed-bottom">


    <div class="preloader">
        <div class="sk-double-bounce">
            <div class="sk-child sk-double-bounce1"></div>
            <div class="sk-child sk-double-bounce2"></div>
        </div>
    </div>

    <!-- Header Layout -->
    <div class="mdk-header-layout js-mdk-header-layout">

        <!-- Header -->

        <%- include('../layout/header-dashboard', {avatar: infoStudent.user.avatar}); %>

        <!-- // END Header -->

        <!-- Header Layout Content -->
        <div class="mdk-header-layout__content page-content ">

            <div class="bg-gradient-primary border-bottom-white py-32pt">
                <div class="container d-flex flex-column flex-md-row align-items-center text-center text-md-left">
                    <img src="../assets/images/illustration/student/128/white.svg" width="104"
                        class="mr-md-32pt mb-32pt mb-md-0" alt="student">
                    <div class="flex mb-32pt mb-md-0">
                        <h2 class="text-white mb-0"><%= infoStudent.user.fullname %></h2>
                        <p class="lead text-white-50 d-flex align-items-center">Student <span
                                class="ml-16pt d-flex align-items-center"><i
                                    class="material-icons icon-16pt mr-4pt">opacity</i>
                                    <% if (getTotalIq == null) { %>
                                    0 IQ
                                    <% } else{  %> 
                                        <%= getTotalIq %>
                                    <% } %>
                                </span></p>
                    </div>
                    <a href="/student/edit-account" class="btn btn-outline-white">Edit account</a>
                </div>
            </div>

            <div class="navbar navbar-expand-sm navbar-dark-white bg-gradient-primary p-sm-0 ">
                <div class="container page__container">

                    <!-- Navbar toggler -->
                    <button class="navbar-toggler ml-n16pt" type="button" data-toggle="collapse"
                        data-target="#navbar-submenu2">
                        <span class="material-icons">people_outline</span>
                    </button>

                    <div class="collapse navbar-collapse" id="navbar-submenu2">
                        <div class="navbar-collapse__content pb-16pt pb-sm-0">
                            <ul class="nav navbar-nav">

                                <li class="nav-item active">
                                    <a href="/student/dashboard" class="nav-link">Dashboard</a>
                                </li>
                                <li class="nav-item">
                                    <a href="/student/courses" class="nav-link">Courses</a>
                                </li>
                                <!-- <li class="nav-item">
                                    <a href="student-discussions.html" class="nav-link">Discussions</a>
                                </li> -->

                            </ul>
                            <ul class="nav navbar-nav ml-auto">
                                <li class="nav-item">
                                    <a href="/student/profile/<%= infoStudent.user._id %>" class="nav-link">Profile</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="container page__container">
                <div class="page-section">
               

                    <div class="row mb-lg-8pt">
                        <div class="col-lg-12">

                            <div class="card">
                                <div class="card-header d-flex align-items-center border-0">
                                    <div class="h2 mb-0 mr-3 text-accent"><%= iqTotal7Day %></div>
                                    <div class="flex">
                                        <p class="mb-0"><strong>Experience IQ</strong></p>
                                        <p class="text-50 mb-0 mt-n1">7 days streak this week</p>
                                    </div>
                                    <i class="material-icons text-muted ml-2">trending_up</i>
                                </div>
                                <div class="card-body pt-0">
                                    <div class="chart" style="height: auto;">
                                        <canvas id="myChart" class="chart-canvas"></canvas>
                                    </div>
                                </div>
                            </div>
                          
                        </div>
                        <div class="col-lg-12">
                            <div id="carouselExampleFade" class="carousel carousel-card slide mb-24pt">
                                <div class="carousel-inner">
                                    <% if (getCourseStudied.length > 0) { %>
                                        <% getCourseStudied.forEach(function(item) { %>
                                        <div class="carousel-item active">

                                            <a class="card mb-0" href="#">
                                                <img src="../assets/images/achievements/flinto.png" alt="Flinto"
                                                    class="card-img" style="max-height: 100%; width: initial;">
                                                <div class="fullbleed bg-primary" style="opacity: .5;"></div>
                                                <span class="card-body fullbleed">
                                                    <span class="row">
                                                        <span class="col-5 text-center">
                                                            <span
                                                                class="h5 text-white text-uppercase font-weight-normal m-0 d-block">Achievement</span>
                                                            <span class="text-white-60 d-block mb-16pt">
                                                                <script>
                                                                    document.write(moment("<%= item.last_update %>").fromNow())    
                                                                </script>
                                                            </span>
                                                            <img src="../assets/images/illustration/achievement/128/white.png"
                                                                alt="achievement">
                                                        </span>
                                                        <span class="col-7 d-flex flex-column">
                                                            <span class="text-right flex">
                                                                <img src="../assets/images/paths/flinto_40x40%402x.png"
                                                                    width="64" alt="Flinto" class="rounded">
                                                            </span>
                                                            <span>
                                                                <span class="h4 text-white m-0 d-block">
                                                                    <%= item.topic %>
                                                                </span>
                                                                <span class="text-white-60">
                                                                    <%= item.name %>
                                                                </span>
                                                            </span>
                                                        </span>
                                                    </span>
                                                </span>
                                            </a>

                                        </div>
                                        <% }) %>
                                    <% } else {%>
                                        <h2>You have not completed any course.</h2>
                                        <% } %>
                                </div>
                                <!-- <a class="carousel-control-prev" href="#carouselExampleFade" role="button" data-slide="prev">
    <span class="carousel-control-icon material-icons" aria-hidden="true">keyboard_arrow_left</span>
    <span class="sr-only">Previous</span>
  </a> -->
                            <% if (getCourseStudied.length > 0) { %>
                                <a class="carousel-control-next" href="#carouselExampleFade" role="button"
                                    data-slide="next">
                                    <span class="carousel-control-icon material-icons"
                                        aria-hidden="true">keyboard_arrow_right</span>
                                    <span class="sr-only">Next</span>
                                </a>
                            <% } %>
                            </div>


                        </div>
                    </div>

                    <div class="row mb-lg-8pt">
                        <div class="col-lg-6 mb-8pt mb-sm-0">
                            <div class="page-heading">
                                <h4>Maybe you are interested</h4>
                                <a href="student-my-courses.html" class="text-underline ml-sm-auto"></a>
                            </div>


                            <% if (getCourseNotPurchased) { %>
                                <% getCourseNotPurchased.forEach(function(item) { %>

                                <div class="card card-path js-overlay stack stack--1 mb-16pt" data-toggle="popover"
                                    data-trigger="click">
                                    <div class="card-body">
                                        <div class="d-flex align-items-center">
                                            <div class="flex">
                                                <div class="d-flex align-items-center">
                                                    <div class="rounded mr-16pt z-0 o-hidden">
                                                        <div class="overlay">
                                                            <img src="../upload/images/<%= item.avatar %>" width="40"
                                                                height="40" alt="Angular" class="rounded">
                                                            <span class="overlay__content overlay__content-transparent">
                                                                <span
                                                                    class="overlay__action d-flex flex-column text-center lh-1">
                                                                    <small class="h6 small text-white mb-0"
                                                                        style="font-weight: 500;">80%</small>
                                                                </span>
                                                            </span>
                                                        </div>
                                                    </div>
                                                    <div class="flex">
                                                        <div class="card-title text-body mb-0">
                                                            <%= item.name %>
                                                        </div>
                                                        <div class="text-muted d-flex lh-1">
                                                            <%= item.topic %>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <a href="../course/<%= item._id %>" class="ml-4pt btn btn-link">View</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="popoverContainer d-none">
                                    <div class="media">
                                        <div class="media-left">
                                            <img src="../upload/images/<%= item.avatar %>" width="40" height="40"
                                                alt="Angular" class="rounded">
                                        </div>
                                        <div class="media-body">
                                            <div class="card-title mb-0">
                                                <%= item.name %>
                                            </div>
                                            <span class="text-black-50 d-flex lh-1">
                                                <%= item.description %>
                                            </span>
                                        </div>
                                    </div>

                                    <div class="my-32pt">
                                        <div class="d-flex align-items-center mb-8pt justify-content-center">
                                            <div class="d-flex align-items-center mr-8pt">
                                                <!-- <span
                                                    class="material-icons icon-16pt text-black-50 mr-4pt">access_time</span>
                                                <p class="flex text-black-50 lh-1 mb-0"><small>50 minutes left</small></p> -->
                                            </div>
                                            <div class="d-flex align-items-center">
                                                <span
                                                    class="material-icons icon-16pt text-black-50 mr-4pt">play_circle_outline</span>
                                                <p class="flex text-black-50 lh-1 mb-0"><small>
                                                    <%= item.lessons.length %>
                                                    lessons</small></p>
                                            </div>
                                        </div>
                                        <div class="d-flex align-items-center justify-content-center">
                                            <a href="../course/<%= item._id %>" class="btn btn-primary">View</a>
                                            <!-- <a href="../course/<%= item._id %>" class="btn btn-outline-secondary ml-0">Start over</a> -->
                                        </div>
                                    </div>

                                    <div class="d-flex align-items-center">
                                        <small class="text-black-50 mr-8pt">Rating</small>
                                        <div class="rating mr-8pt">
                                                <div class="inline-block" id="ks2-<%= item._id %>"></div>
                                                <script>
                                                    var dataArray = <%- JSON.stringify(item.ratings) %>;
                                                    var array='';
                                                    var sum = 0;
                                                    for (let i = 0; i < dataArray.length; i++) {
                                                        sum += dataArray[i]*1;
                                                    }
                                                    var result = sum / dataArray.length;
                                                    for (let i = 0; i < 5; i++) {
                                                        if (i < result) {
                                                            array+='<span class="rating__item"><span class="material-icons">star</span>';
                                                        }
                                                        else{
                                                            array+='<span class="rating__item"><span class="material-icons">star_border</span>';
                                                        }
                                                    }
                                                    //console.log(dataArray)
                                                    document.getElementById("ks2-<%= item._id %>").innerHTML = array;
                                                </script>
                                        </div>
                                        <small class="text-black-50">
                                        <div class="inline-block" id="rl1-<%= item._id %>"></div>
                                        <script>
                                                var dataArray = <%- JSON.stringify(item.ratings) %>;
                                                var sum = 0;
                                                for (let i = 0; i < dataArray.length; i++) {
                                                    sum += dataArray[i]*1;
                                                }
                                                var result = sum / dataArray.length;
                                                // document.write(result.toFixed(1));
                                                if (isNaN(result)) {
                                                    result = 0;
                                                }
                                                document.getElementById("rl1-<%= item._id %>").innerHTML = result.toFixed(1) +"/5";
                                                //console.log(dataArray)
                                            </script></small>
                                    </div>
                                </div>

                                <% }) %>
                            <% } %>

                        </div>

                        <div class="col-lg-6">
                            <div class="page-heading">
                                <h4>Courses</h4>
                                <a href="student-my-courses.html" class="text-underline ml-sm-auto">My courses</a>
                            </div>



                            <div class="position-relative carousel-card">
                                <div class="js-mdk-carousel row d-block" id="carousel-courses1">

                                    <a class="carousel-control-next js-mdk-carousel-control mt-n24pt"
                                        href="#carousel-courses1" role="button" data-slide="next">
                                        <span class="carousel-control-icon material-icons"
                                            aria-hidden="true">keyboard_arrow_right</span>
                                        <span class="sr-only">Next</span>
                                    </a>

                                    <div class="mdk-carousel__content">
                                        <% if (getCoursePurchased) { %>
                                            <% getCoursePurchased.courses.forEach( item => { %>
                                            <div class="col-12 col-sm-6">

                                                <div class="card card--elevated card-course overlay js-overlay mdk-reveal js-mdk-reveal "
                                                    data-partial-height="40" data-toggle="popover" data-trigger="click">
                                                    <a href="student-take-course.html" class="js-image" data-position="">
                                                        <img src="../upload/images/<%= item.id_course.avatar %>" height="170" alt="course">
                                                        <span class="overlay__content">
                                                            <span class="overlay__action d-flex flex-column text-center">
                                                                <i class="material-icons">play_circle_outline</i>
                                                                <small>Resume course</small>
                                                            </span>
                                                        </span>
                                                    </a>

                                                    <div class="mdk-reveal__content">
                                                        <div class="card-body">
                                                            <div class="d-flex">
                                                                <div class="flex">
                                                                    <a class="card-title"
                                                                        href="/course/<%= item.id_course._id %>"><%= item.id_course.name %></a>
                                                                    <small class="text-50 font-weight-bold mb-4pt"><%= item.id_course.teacher.fullname %></small>
                                                                </div>
                                                                <a href="student-take-course.html"
                                                                    class="ml-4pt material-icons text-20 card-course__icon-favorite">favorite</a>
                                                            </div>
                                                            <div class="d-flex">
                                                                <div class="rating flex">
                                                                        <script>
                                                                            var dataArray = <%- JSON.stringify(item.ratings) %>;
                                                                            var sum = 0;
                                                                            for (let i = 0; i < dataArray.length; i++) {
                                                                                sum += dataArray[i]*1;
                                                                            }
                                                                            var result = sum / dataArray.length;
                                                                            for (let i = 0; i < 5; i++) {
                                                                                if (i < result) {
                                                                                    document.write('<span class="rating__item"><span class="material-icons">star</span></span>')
                                                                                }
                                                                                else{
                                                                                    document.write('<span class="rating__item"><span class="material-icons">star_border</span></span>')
                                                                                }
                                                                            }
                                                                            //console.log(dataArray)
                                                                        </script>
                                                                </div>
                                                                <!-- <small class="text-50"></small> -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="popoverContainer d-none">
                                                    <div class="media">
                                                        <div class="media-left">
                                                            <img src="../upload/images/<%= item.id_course.avatar %>" width="40"
                                                                height="40" alt="Angular" class="rounded">
                                                        </div>
                                                        <div class="media-body">
                                                            <div class="card-title mb-0">
                                                                <%= item.id_course.name %>
                                                            </div>
                                                            <p class="lh-1 mb-0">
                                                                <span class="text-black-50 small">with</span>
                                                                <span class="text-black-50 small font-weight-bold">
                                                                    <%= item.id_course.teacher.fullname %>
                                                                </span>
                                                            </p>
                                                        </div>
                                                    </div>


                                                    <div class="my-32pt">
                                                        <div
                                                            class="d-flex align-items-center mb-8pt justify-content-center">
                                                            <div class="d-flex align-items-center mr-8pt">
                                                                <!-- <span
                                                                    class="material-icons icon-16pt text-black-50 mr-4pt">access_time</span>
                                                                <p class="flex text-black-50 lh-1 mb-0"><small>50 minutes
                                                                        left</small></p> -->
                                                            </div>
                                                            <div class="d-flex align-items-center">
                                                                <span
                                                                    class="material-icons icon-16pt text-black-50 mr-4pt">play_circle_outline</span>
                                                                <p class="flex text-black-50 lh-1 mb-0"><small>
                                                                    <%= item.lesson_number.length %>
                                                                        lessons</small></p>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex align-items-center justify-content-center">
                                                            <a href="/course/<%= item.id_course._id %>"
                                                                class="btn btn-primary mr-8pt">Resume</a>
                                                            <!-- <a href="student-take-course.html"
                                                                class="btn btn-outline-secondary ml-0">Start over</a> -->
                                                        </div>
                                                    </div>

                                                    <div class="d-flex align-items-center">
                                                        <small class="text-black-50 mr-8pt">Rating</small>
                                                        <div class="rating mr-8pt">
                                                            <div class="inline-block" id="<%= item.id_course._id %>"></div>
                                                                <script>
                                                                    var dataArray = <%- JSON.stringify(item.id_course.ratings) %>;
                                                                    var array='';
                                                                    var sum = 0;
                                                                    for (let i = 0; i < dataArray.length; i++) {
                                                                        sum += dataArray[i]*1;
                                                                    }
                                                                    var result = sum / dataArray.length;
                                                                    for (let i = 0; i < 5; i++) {
                                                                        if (i < result) {
                                                                            array+='<span class="rating__item"><span class="material-icons">star</span>';
                                                                        }
                                                                        else{
                                                                            array+='<span class="rating__item"><span class="material-icons">star_border</span>';
                                                                        }
                                                                    }
                                                                    //console.log(dataArray)
                                                                    document.getElementById("<%= item.id_course._id %>").innerHTML = array;
                                                                </script>
                                                        </div>
                                                        <small class="text-black-50">
                                                        <div class="inline-block" id="r-<%= item.id_course._id %>"></div>
                                                        <script>
                                                                var dataArray = <%- JSON.stringify(item.id_course.ratings) %>;
                                                                var sum = 0;
                                                                for (let i = 0; i < dataArray.length; i++) {
                                                                    sum += dataArray[i]*1;
                                                                }
                                                                var result = sum / dataArray.length;
                                                                // document.write(result.toFixed(1));
                                                                document.getElementById("r-<%= item.id_course._id %>").innerHTML = result.toFixed(1) +"/5";
                                                                //console.log(dataArray)
                                                            </script>
                                                           
                                                        </small>
                                                    </div>


                                                </div>

                                            </div>
                                            <% }); %>
                                        <% } %>
                                      
                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>

            
                    </div>

                </div>
            </div>



            <% include ../layout/footer %>

        </div>
        <!-- // END Header Layout Content -->

    </div>
    <!-- // END Header Layout -->
    <% include ../layout/modal %>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>

    <script>
        let notificationLogin = <%= notificationLogin %>;
        if (notificationLogin == true) {

            const Toast = Swal.mixin({
                toast: true,
                position: 'top-end',
                showConfirmButton: false,
                timer: 5000
            });

            Toast.fire({
                type: 'success',
                title: 'Signed in successfully'
            })
        }
    </script>
        <script>
            var dataArray = <%- JSON.stringify(getIqAWeek) %>;
            //console.log(dataArray);
    
            var dates = [];
            for (let index = 0 ;index < 7; index++) {
                let date = new Date();
                
                date.setDate(date.getDate() - index);
    
                var finalDate = date.getDate()+'/'+ (date.getMonth()+1) +'/'+date.getFullYear();
                dates.push(finalDate);
            }
            var trueDates = dates.reverse();
         
            var ctx = document.getElementById('myChart').getContext('2d');
            var myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: trueDates,
                    datasets: [{
                        label: 'IQ in Week',
                        data: dataArray,
                        backgroundColor: [
                            'rgba(54, 162, 235, 0.5)',
                            'rgba(54, 162, 235, 0.5)',
                            'rgba(54, 162, 235, 0.5)',
                            'rgba(54, 162, 235, 0.5)',
                            'rgba(54, 162, 235, 0.5)',
                            'rgba(54, 162, 235, 0.5)',
                            'rgba(54, 162, 235, 0.5)',

                            // 'rgba(255, 99, 132, 0.7)',
                            
                            // 'rgba(54, 162, 235, 0.7)',
    
                        ],
                        borderColor: [
                            //'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
    
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    scales: {
                        yAxes: [{
                            ticks: {
                                beginAtZero: true
                            },
                            //stacked: true hai coi data chong len voi nhau
                        }],
                        xAxes: [{
                            barPercentage: 0.5,
                            barThickness: 45,
                            maxBarThickness: 50,
                            minBarLength: 20,
                            gridLines: {
                                offsetGridLines: true
                            },
                            //stacked: true
                        }]
                    },
                    layout: {
                        padding: {
                            left: 0,
                            right: 0,
                            top: 0,
                            bottom: 0
                        }
                    },
                    responsive: true,
    
                }
            });
        </script>

    <!-- jQuery -->
    <script src="../assets/vendor/jquery.min.js"></script>

    <!-- Bootstrap -->
    <script src="../assets/vendor/popper.min.js"></script>
    <script src="../assets/vendor/bootstrap.min.js"></script>

    <!-- Perfect Scrollbar -->
    <script src="../assets/vendor/perfect-scrollbar.min.js"></script>

    <!-- DOM Factory -->
    <script src="../assets/vendor/dom-factory.js"></script>

    <!-- MDK -->
    <script src="../assets/vendor/material-design-kit.js"></script>

    <!-- Fix Footer -->
    <script src="../assets/vendor/fix-footer.js"></script>

    <!-- Chart.js -->
    <!-- <script src="../assets/vendor/Chart.min.js"></script> -->

    <!-- App JS -->
    <script src="../assets/js/app.js"></script>

    <!-- Highlight.js -->
    <script src="../assets/js/hljs.js"></script>

    <!-- App Settings (safe to remove) -->
    <script src="../assets/js/app-settings.js"></script>


    <!-- Global Settings -->
    <script src="../assets/js/settings.js"></script>

    <!-- Moment.js -->
    <script src="../assets/vendor/moment.min.js"></script>
    <script src="../assets/vendor/moment-range.min.js"></script>

    <!-- Chart.js -->
    <!-- <script src="../assets/vendor/Chart.min.js"></script> -->

    <!-- Charts JS -->
    <!-- <script src="../assets/js/chartjs.js"></script> -->

    <!-- Chart.js Samples -->
    <!-- <script src="../assets/js/page.student-dashboard.js"></script> -->

</body>


<!-- Mirrored from tutorio-bootstrap.frontendmatter.com/student-dashboard.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 09 Jul 2019 02:22:47 GMT -->

</html>
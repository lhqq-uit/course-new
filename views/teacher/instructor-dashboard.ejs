<!DOCTYPE html>
<html lang="en" dir="ltr">


<!-- Mirrored from tutorio-bootstrap.frontendmatter.com/instructor-dashboard.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 09 Jul 2019 02:22:50 GMT -->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Dashboard</title>

    <!-- Prevent the demo from appearing in search engines -->
    <meta name="robots" content="noindex">

    <!-- Perfect Scrollbar -->
    <link type="text/css" href="../assets/vendor/perfect-scrollbar.css" rel="stylesheet">

    <!-- Fix Footer CSS -->
    <link type="text/css" href="../assets/vendor/fix-footer.css" rel="stylesheet">

    <!-- Material Design Icons -->
    <link type="text/css" href="../assets/css/material-icons.css" rel="stylesheet">
    <link type="text/css" href="../assets/css/material-icons.rtl.css" rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link type="text/css" href="../assets/css/fontawesome.css" rel="stylesheet">
    <link type="text/css" href="../assets/css/fontawesome.rtl.css" rel="stylesheet">

    <!-- Preloader -->
    <link type="text/css" href="../assets/css/preloader.css" rel="stylesheet">
    <link type="text/css" href="../assets/css/preloader.rtl.css" rel="stylesheet">

    <!-- App CSS -->
    <link type="text/css" href="../assets/css/app.css" rel="stylesheet">
    <link type="text/css" href="../assets/css/app.rtl.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0/dist/Chart.min.js"></script>
    <script src="https://momentjs.com/downloads/moment-with-locales.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.1/tiny-slider.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.1/min/tiny-slider.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>
    
    <style>
        .tns-controls [aria-controls] {
            font-size: 15px;
            margin: 0 5px;
            padding: 0 1em;
            height: 2.5em;
            color: #000;
            background: #66CCFF;
            border-radius: 3px;
            border: 0;
        }

        .tns-controls {
            text-align: center;
            margin-bottom: 10px;
        }

        .goto-controls {
            margin-bottom: 10px;
            text-align: center;
        }

        .goto-controls input,
        .goto-controls .button {
            display: inline-block;
            font-size: 14px;
            height: 2.6em;
            line-height: 2.6;
            padding: 0 1em;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
            vertical-align: middle;
        }

        .goto-controls input {
            border: 1px solid #ccc;
        }

        .goto-controls .button {
            min-width: 4em;
            border: none;
            color: #fff;
            background-color: #333;
            cursor: pointer;
        }
    </style>




</head>

<body class="layout-navbar-mini-fixed-bottom">

    <div class="preloader">
        <div class="sk-double-bounce">
            <div class="sk-child sk-double-bounce1"></div>
            <div class="sk-child sk-double-bounce2"></div>
        </div>
    </div>

    <!-- Header Layout -->
    <div class="mdk-header-layout js-mdk-header-layout">

        <!-- Header -->

        
        <%- include('../layout/header-dashboard', {avatar: infoTeacher.user.avatar}); %>

        <!-- // END Header -->

        <!-- Header Layout Content -->
        <div class="mdk-header-layout__content page-content ">

            <div class="bg-gradient-primary border-bottom-white py-32pt">
                <div class="container d-flex flex-column flex-md-row align-items-center text-center text-md-left">
                    <img src="../assets/images/illustration/teacher/128/white.svg" width="104"
                        class="mr-md-32pt mb-32pt mb-md-0" alt="instructor">
                    <div class="flex mb-32pt mb-md-0">
                        <h2 class="text-white mb-0"><%= infoTeacher.user.fullname %></h2>
                        <p class="lead text-white-50 d-flex align-items-center">Teacher <span
                                class="ml-16pt d-flex align-items-center"><i
                                    class="material-icons icon-16pt mr-4pt">opacity</i> 
                                    <% if (infoTeacher.iq == null) { %>
                                        0 IQ
                                        <% } else{  %> 
                                            <%= infoTeacher.iq %>
                                        <% } %> 
                                </span></p>
                    </div>
                    <a href="/user/edit-account" class="btn btn-outline-white">Edit account</a>
                </div>
            </div>

            <div class="navbar navbar-expand-sm navbar-dark-white bg-gradient-primary p-sm-0 ">
                <div class="container page__container">

                    <!-- Navbar toggler -->
                    <button class="navbar-toggler ml-n16pt" type="button" data-toggle="collapse"
                        data-target="#navbar-submenu2">
                        <span class="material-icons">people_outline</span>
                    </button>

                    <div class="collapse navbar-collapse" id="navbar-submenu2">
                        <div class="navbar-collapse__content pb-16pt pb-sm-0">
                            <ul class="nav navbar-nav">

                                <li class="nav-item active">
                                    <a href="/dashboard" class="nav-link">Dashboard</a>
                                </li>
                                <li class="nav-item dropdown">
                                    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Manage</a>
                                    <div class="dropdown-menu">
                                        <a class="dropdown-item" href="/teacher/courses">Courses</a>
                                    <a class="dropdown-item" href="/teacher/quizzes">Quizzes</a>
                                        <!-- <a class="dropdown-item" href="instructor-edit-course.html">Edit Course</a>
                                        <a class="dropdown-item" href="instructor-edit-quiz.html">Edit Quiz</a> -->
                                    </div>
                                </li>
                                <li class="nav-item dropdown">
                                    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Reports</a>
                                    <div class="dropdown-menu">
                                        <!-- <a class="dropdown-item" href="instructor-earnings.html">Earnings</a> -->
                                        <a class="dropdown-item" href="/teacher/statement">Statement</a>
                                    </div>
                                </li>

                            </ul>
                            <ul class="nav navbar-nav ml-auto">
                                <li class="nav-item">
                                    <a href="/teacher/profile/<%= infoTeacher.user._id %>" class="nav-link">Profile</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="py-24pt bg-white border-bottom-2">
                <div class="container page__container">

                    <div class="row">
                        <div class="col-lg-4">
                            <div class="border-1 border-left-3 border-left-accent rounded text-70 text-center mb-lg-0">
                                <div class="card-body">
                                    Earnings this month
                                    <p class="lead text-body mb-0"><strong>
                                        $<%= getTransactionThisMonth.value %>
                                    </strong></p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="border rounded text-70 text-center mb-lg-0">
                                <div class="card-body">
                                    Average amount
                                    <p class="lead text-body mb-0"><strong>$ <%= getAverageMonthlySalary.Value %></strong></p>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="border rounded text-70 text-center mb-lg-0">
                                <div class="card-body">
                                    Total Sales
                                    <p class="lead text-body mb-0"><strong>
                                        $<%= infoTeacher.salary%>
                                    </strong></p>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="container page__container page-section">

                <div class="mb-heading d-flex align-items-end">
                    <div class="flex">
                        <h4 class="card-title">Earnings</h4>
                        <p class="card-subtitle">Last Week vs. Previous Week</p>
                    </div>
                    <!-- <a href="instructor-earnings.html" class="text-underline">View Earnings</a> -->
                </div>
                <div class="card p-24pt mb-32pt">
                    <div class="chart" style="height: auto;">
                        <canvas id="myChart" class="chart-canvas"></canvas>
                    </div>
                </div>

                <div class="row mb-8pt">
                    <div class="col-lg-12">

                        <div class="mb-heading d-flex align-items-end">
                            <div class="flex">
                                <h4 class="card-title">Transactions</h4>
                                <p class="card-subtitle">Latest Transactions</p>
                            </div>
                            <a href="instructor-statement.html" class="text-underline">Statement</a>
                        </div>
                        <%- include('../layout/Transactions', {getTransactionOneWeek: getTransactionOneWeek}) %>

                    </div>
                    <div class="col-lg-12">

                        <div class="mb-heading d-flex align-items-center">
                            <div class="flex">
                                <h4 class="card-title">Comments</h4>
                                <p class="card-subtitle">Latest comments</p>
                            </div>
                            <div class="d-flex align-items-center text-right">
                                <div class="goto-controls">
                                    Go to comment: <input type="text" id="getNumberSlide" placeholder="Goto..." > <button class="button goto-button active">Go</button>
                                </div>
                            </div>
                        </div>

                        <div id="my-slider" class="my-slider">
                        <% if (getCommentTeacher) { %>   
                            <% getCommentTeacher.idCourses.forEach(function(e){ %>
                                <% for (let i = 0; i < e.lessons.length; i++) { %>
                                    <% for (let j = 0; j < e.lessons[i].comment.length; j++) { %>
                                    <div class="item">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="media">
                                                <div class="media-left">
                                                    <a href="/profile/<%= e.lessons[i].comment[j].user._id %>" class="avatar avatar-sm">
                                                        <img src="../avatar/<%= e.lessons[i].comment[j].user.avatar %>" alt="Guy" class="avatar-img rounded-circle">
                                                    </a>
                                                </div>
                                                <div class="media-body d-flex flex-column">
                                                    <div class="d-flex align-items-center">
                                                        <a href="/profile/<%= e.lessons[i].comment[j].user._id %>" class="text-body"><strong>
                                                            <%= e.lessons[i].comment[j].user.fullname %>
                                                        </strong></a>
                                                        <small class="ml-auto text-muted">
                                                            <script type="text/javascript">
                                                                //let showtime = moment().startOf('hour').fromNow();
                                                                document.write(moment("<%= e.lessons[i].comment[j].time %>").fromNow());
                                                                //document.write(showtime);
                                                            </script>
                                                            
                                                        </small><br>
                                                    </div>
                                                    <span class="text-muted">on <a href="../course/<%= e._id %>" class="text-50" target="_blank" style="text-decoration: underline;">
                                                            <%= e.name %>
                                                            
                                                    </a></span>
                                                    <span class="text-muted">at lesson <a href="../lesson/<%= e.lessons[i]._id %>" target="_blank" class="text-50" style="text-decoration: underline;">
                                                        

                                                        <%= e.lessons[i].title %>
                                                    </a></span>
                                                    
                                                    <p class="mt-1 mb-0 text-70">
                                                        <%= e.lessons[i].comment[j].content %>
                                                    </p>
                                                </div>
                                            </div>
                                            <% if (e.lessons[i].comment[j].reply.length > 0) { %>
                                                <% for (let k = 0; k < e.lessons[i].comment[j].reply.length; k++) { %>
                                                    <div class="container col-12">
                                                    <div class="media ml-sm-32pt mt-3 border rounded p-3 bg-light d-inline-flex measure-paragraph-max">
                                                        <div class="media-left">
                                                            <a href="/profile/<%= e.lessons[i].comment[j].reply[k].user._id %>" class="avatar avatar-sm">
                                                                <img src="../avatar/<%= e.lessons[i].comment[j].reply[k].user.avatar %>" alt="Guy" class="avatar-img rounded-circle">
                                                            </a>
                                                        </div>
                                                        <div class="media-body">
                                                            <div class="d-flex align-items-center">
                                                                <a href="/profile/<%= e.lessons[i].comment[j].reply[k].user._id %>" class="text-body"><strong>
                                                                    <%= e.lessons[i].comment[j].reply[k].user.fullname %>
                                                                </strong></a>
                                                                <small class="ml-5 text-muted">
                                                                    <script type="text/javascript">
                                                                        //let showtime = moment().startOf('hour').fromNow();
                                                                        document.write(moment("<%= e.lessons[i].comment[j].reply[k].time %>").fromNow());
                                                                        //document.write(showtime);
                                                                    </script>
                                                                </small>
                                                            </div>
                                                            <p class="mt-1 mb-0 text-70">
                                                                <%= e.lessons[i].comment[j].reply[k].content %>
                                                            </p>
                                                        </div>
                                                    </div>
                                                    </div>
                                                    
                                                <% } %>
                                            <% } %>
                                            
                                            
                                        </div>
                                        <!-- <div class="card-footer">
                                            <form action="#" id="message-reply">
                                                <div class="input-group input-group-merge">
                                                    <input type="text" class="form-control form-control-appended" required="" placeholder="Quick Reply">
                                                    <div class="input-group-append">
                                                        <div class="input-group-text pl-0">
                                                            <button class="btn btn-flush" type="button"><i class="material-icons">send</i></button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div> -->
                                    </div>
                                    </div>
                                    <% } %>
                                <% } %>
                            <% }); %>
                        <% } %>
                    </div>
                </div>
                </div>

            </div>
           

           

            <% include ../layout/footer %>
            
        </div>
        <!-- // END Header Layout Content -->
       
    </div>
    <% include ../layout/modal %>
    <!-- // END Header Layout -->
    <!-- <script>
        var socket = io();
        socket.on('testerEvent', function (data) {
            document.write(data.description)
            //alert(data.description)
        });
        socket.emit('clientEvent', 'Sent an event from the client!');
    </script> -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
    <script>
        var slider = tns({
            container: '.my-slider',
            items: 1,
            prevButton: false,
            nextButton: false,
            nav: false,
            autoHeight: true,
            slideBy: "page",
            //mouseDrag: true,
            swipeAngle: false,
            speed: 400,

        });
        document.querySelector('.goto-button').onclick = function () {
            slider.goTo(document.getElementById("getNumberSlide").value);
        };
    </script>

    <script>
        let notificationLogin = <%= notificationLogin %>;
        if (notificationLogin == true) {

            const Toast = Swal.mixin({
                toast: true,
                position: 'top-end',
                showConfirmButton: false,
                timer: 5000
            });

            Toast.fire({
                type: 'success',
                title: 'Signed in successfully'
            })
        }
    </script>
    <script>
        var dataArray = <%- JSON.stringify(dataChartArray) %>;
        //console.log(dataArray);

        var data1 = [];
        var data2 = [];
        dataArray.forEach(function(item, index, array) {
            //console.log(item, index);
            if (index < 7) {
                data1.push(item);
            }
            else{
                data2.push(item);
            }
        });

        var dates = [];
        for (let index = 0 ;index < 7; index++) {
            let date = new Date();
            
            date.setDate(date.getDate() - index);

            var finalDate = date.getDate()+'/'+ (date.getMonth()+1) +'/'+date.getFullYear();
            dates.push(finalDate);
        }
        var trueDates = dates.reverse();
     
        var ctx = document.getElementById('myChart').getContext('2d');
        var myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: trueDates,
                datasets: [{
                    label: 'Last Week',
                    data: data1,
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.7)',
                        'rgba(255, 99, 132, 0.7)',
                        'rgba(255, 99, 132, 0.7)',
                        'rgba(255, 99, 132, 0.7)',
                        'rgba(255, 99, 132, 0.7)',
                        'rgba(255, 99, 132, 0.7)',
                        'rgba(255, 99, 132, 0.7)',
                        // 'rgba(54, 162, 235, 0.7)',

                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        //'rgba(54, 162, 235, 1)',

                    ],
                    borderWidth: 1
                }, {
                    label: 'This week',
                    data: data2,
                    backgroundColor: [

                        'rgba(54, 162, 235, 0.7)',
                        'rgba(54, 162, 235, 0.7)',
                        'rgba(54, 162, 235, 0.7)',
                        'rgba(54, 162, 235, 0.7)',
                        'rgba(54, 162, 235, 0.7)',
                        'rgba(54, 162, 235, 0.7)',
                        'rgba(54, 162, 235, 0.7)',
                        //'rgba(255, 0, 0, 0.6)'

                    ],
                    borderColor: [
                        //'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',

                    ],
                    borderWidth: 1,

                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        },
                        //stacked: true hai coi data chong len voi nhau
                    }],
                    xAxes: [{
                        barPercentage: 0.5,
                        barThickness: 45,
                        maxBarThickness: 50,
                        minBarLength: 20,
                        gridLines: {
                            offsetGridLines: true
                        },
                        //stacked: true
                    }]
                },
                layout: {
                    padding: {
                        left: 0,
                        right: 0,
                        top: 0,
                        bottom: 0
                    }
                },
                responsive: true,

            }
        });
    </script>

    <!-- jQuery -->
    <script src="../assets/vendor/jquery.min.js"></script>

    <!-- Bootstrap -->
    <script src="../assets/vendor/popper.min.js"></script>
    <script src="../assets/vendor/bootstrap.min.js"></script>

    <!-- Perfect Scrollbar -->
    <script src="../assets/vendor/perfect-scrollbar.min.js"></script>

    <!-- DOM Factory -->
    <script src="../assets/vendor/dom-factory.js"></script>

    <!-- MDK -->
    <script src="../assets/vendor/material-design-kit.js"></script>

    <!-- Fix Footer -->
    <script src="../assets/vendor/fix-footer.js"></script>

    <!-- Chart.js -->
    <!-- <script src="../assets/vendor/Chart.min.js"></script> -->

    <!-- App JS -->
    <script src="../assets/js/app.js"></script>

    <!-- Highlight.js -->
    <script src="../assets/js/hljs.js"></script>

    <!-- App Settings (safe to remove) -->
    <script src="../assets/js/app-settings.js"></script>


    <!-- Global Settings -->
    <script src="../assets/js/settings.js"></script>

    <!-- Moment.js -->
    <!-- <script src="../assets/vendor/moment.min.js"></script>
    <script src="../assets/vendor/moment-range.min.js"></script> -->

    <!-- Chart.js -->
    <!-- <script src="../assets/vendor/Chart.min.js"></script> -->

    <!-- UI Charts Page JS -->
    <!-- <script src="../assets/js/chartjs-rounded-bar.js"></script>
    <script src="../assets/js/chartjs.js"></script> -->

    <!-- Chart.js Samples -->
    <script src="../assets/js/page.instructor-dashboard.js"></script>

    <!-- List.js -->
    <script src="../assets/vendor/list.min.js"></script>
    <script src="../assets/js/list.js"></script>

</body>


<!-- Mirrored from tutorio-bootstrap.frontendmatter.com/instructor-dashboard.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 09 Jul 2019 02:22:54 GMT -->

</html>